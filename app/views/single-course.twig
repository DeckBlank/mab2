{% extends '_html.twig' %}

{% block hero %}
  {% include 'templates-parts/hero.twig' %}
{% endblock %}

{% block content %}
  {% include "components/signup.twig" %}
  <section 
    ref="course"
    class="c-section c-section--course bg-pri-alt"
    data-id="{{post.id}}"
    data-link="{{post.link}}"
    data-title="{{post.title}}">
    <div class="grid-container padding-top-3 margin-bottom-2">
      <section class="c-content" :class="{ active : isActivePubSectorMenu || isActivePrivSectorMenu }">
        <h1 class="c-title margin-bottom-1 padding-left-1">
          <div class="grid-x grid-margin-x grid-margin-y align-justify align-middle">
            <div class="cell medium-auto">
              <p class="f1 w-bold white margin-bottom-0">{{post.title}}</p>              
            </div>
            <div v-if="logedUser && logedUser.user_sector == 'privado' && !accessGranted" class="cell small-8 medium-4 large-2">
              <button
                :disabled="!isAvaibleCourse" 
                class="fs-21 c-button c-button--secondary width-100 display-block text-center"
                @click="addCourse({{post.id}}, '{{post.title}}', '{{post.link}}')">Comprar curso</button>
            </div>
          </div>
        </h1>
        <div class="margin-bottom-1 f2 fs-18 white w-medium padding-left-1">
          {{post.content}}
        </div>
        <ul class="ul-reset">
          <li v-for="(unity, u_index) of unities" class="c-unity margin-bottom-1 br--medium">
            <input :id="'unity-' + u_index" type="checkbox" class="hide c-unity__checkbox" checked>           
            <label :for="'unity-' + u_index" class="c-unity__toggle align-justify width-100">
              <p class="text-left margin-bottom-0 margin-right-1 w-bold fs-25 white">
                Unidad ${u_index + 1}:
              </p>
              <span class="c-icon display-block white fs-21"><i class="far fa-chevron-down"></i></span>
            </label>
            <div class="c-unity__content position-relative bg-white br--medium padding-1">
              <h3 class="c-unity__title">
                <span class="display-block fs-25 f2 dark-gray w-bold">${unity.title}</span>
                <p class="margin-bottom-0 padding-left-2 fs-25 w-black">.....</p>
              </h3>
              <ul class="c-unity__topics ul-reset">
                <ul v-for="(topic, t_index) of unity.topics" class="c-topic ul-reset f2 fs-21 dar-gray w-medium">
                  <li class="c-topic__item">
                    <a
                      class="c-topic__link flex-container align-justify align-middle"
                      @click="playVideo(
                        topic.video.link + '?course_id={{post.id}}&course_name={{post.title}}&unity=' + (u_index + 1) + '&sector=' + metas.get('sector'),
                        u_index + 1,
                        t_index + 1
                      )">
                      <p v-if="topic.video.state" class="margin-bottom-0 flex-container sec-color align-middle">
                        <span class="c-icon margin-right-1 fs-21 sec-color"><i class="far fa-play-circle"></i></span>
                        ${topic.title}
                      </p>
                      <p v-else class="margin-bottom-0 flex-container dark-gray align-middle">
                        <span class="c-icon margin-right-1 fs-21 pri-color"><i class="far fa-play-circle"></i></span>
                        ${topic.title}
                      </p>
                      <!-- <p class="gray-gray margin-bottom-0">
                        <span class="c-icon margin-right-1"><i class="far fa-clock"></i></span>
                        4:00
                      </p> -->
                    </a>
                  </li>

                  <li v-if="topic.summary" class="c-topic__item">
                    <a
                      target="_blank" 
                      class="c-topic__link flex-container align-justify align-middle"
                      @click="downloadMaterial(u_index + 1, t_index + 1, topic.id, topic.summary, 'summary')">
                      <p class="margin-bottom-0 flex-container align-middle dark-gray">
                        <span class="c-icon margin-right-1 fs-21"><i class="far fa-file-pdf"></i></span>
                        Resumen
                      </p>
                      <p class="gray-gray margin-bottom-0">
                        <span class="c-icon"><i class="far fa-download"></i></span>
                      </p>
                    </a>
                  </li>

                  <li v-if="topic.map" class="c-topic__item">
                    <a
                      target="_blank" 
                      class="c-topic__link flex-container align-justify align-middle"
                      @click="downloadMaterial(u_index + 1, t_index + 1, topic.id, topic.map, 'map')">
                      <p class="margin-bottom-0 flex-container align-middle dark-gray">
                        <span class="c-icon margin-right-1 fs-21"><i class="far fa-file-pdf"></i></span>
                        Mapa Mental
                      </p>
                      <p class="gray-gray margin-bottom-0">
                        <span class="c-icon"><i class="far fa-download"></i></span>
                      </p>
                    </a>
                  </li>

                  <li v-if="topic.worksheet" class="c-topic__item">
                    <a
                      target="_blank" 
                      class="c-topic__link flex-container align-justify align-middle"
                      @click="downloadMaterial(u_index + 1, t_index + 1, topic.id, topic.worksheet, 'worksheet')">
                      <p class="margin-bottom-0 flex-container align-middle dark-gray">
                        <span class="c-icon margin-right-1 fs-21"><i class="far fa-file-pdf"></i></span>
                        Hoja de trabajo
                      </p>
                      <p class="gray-gray margin-bottom-0">
                        <span class="c-icon"><i class="far fa-download"></i></span>
                      </p>
                    </a>
                  </li>

                  <li v-if="topic.solutions" class="c-topic__item">
                    <a
                      target="_blank" 
                      class="c-topic__link flex-container align-justify align-middle"
                      @click="downloadMaterial(u_index + 1, t_index + 1, topic.id, topic.solutions, 'solutions')">
                      <p class="margin-bottom-0 flex-container align-middle dark-gray">
                        <span class="c-icon margin-right-1 fs-21"><i class="far fa-file-pdf"></i></span>
                        Solucionario
                      </p>
                      <p class="gray-gray margin-bottom-0">
                        <span class="c-icon"><i class="far fa-download"></i></span>
                      </p>
                    </a>
                  </li>                        
                </ul>
              </ul>
            </div>
          </li>
          {% for unity in unities %}
            {% set unity_id = loop.index %}
              <li class="c-unity margin-bottom-1 br--medium">
                <input id="unity-{{loop.index}}" type="checkbox" class="hide c-unity__checkbox" checked>           
                <label for="unity-{{loop.index}}" class="c-unity__toggle align-justify width-100">
                  <p class="text-left margin-bottom-0 margin-right-1 w-bold fs-25 white">
                    Unidad {{loop.index}}:
                  </p>
                  <span class="c-icon display-block white fs-21"><i class="far fa-chevron-down"></i></span>
                </label>
                <div class="c-unity__content position-relative bg-white br--medium padding-1">
                  <h3 class="c-unity__title">
                    <span class="display-block fs-25 f2 dark-gray w-bold">{{unity.title}}</span>
                    <p class="margin-bottom-0 padding-left-2 fs-25 w-black">.....</p>
                  </h3>
                  <ul class="c-unity__topics ul-reset">
                    {% for topic in unity.topics %}
                      <ul class="c-topic ul-reset f2 fs-21 dar-gray w-medium">
                        <li class="c-topic__item">
                          <a
                            class="c-topic__link flex-container align-justify align-middle"
                            @click="playVideo(
                              '{{topic.video.link}}?course_id={{post.id}}&course_name={{post.title}}&unity={{unity_id}}&sector=' + metas.get('sector'),
                              {{unity_id}}
                            )">
                            <!-- <p class="margin-bottom-0 flex-container sec-color align-middle">
                              <span class="c-icon margin-right-1 fs-21 sec-color"><i class="far fa-play-circle"></i></span>
                              {{topic.title}}
                            </p> -->
                            <p class="margin-bottom-0 flex-container {% if topic.video.state %} sec-color {% else %} dark-gray {% endif %} align-middle">
                              <span class="c-icon margin-right-1 fs-21 {% if topic.video.state %} sec-color {% else %} pri-color {% endif %}"><i class="far fa-play-circle"></i></span>
                              {{topic.title}}
                            </p>
                            <!-- <p class="gray-gray margin-bottom-0">
                              <span class="c-icon margin-right-1"><i class="far fa-clock"></i></span>
                              4:00
                            </p> -->
                          </a>
                        </li>

                        {% if topic.summary %}
                          <li class="c-topic__item">                 
                            <a
                              target="_blank" 
                              class="c-topic__link flex-container align-justify align-middle"
                              @click="downloadMaterial({{unity_id}}, {{topic.id}}, '{{topic.summary}}', 'summary')">
                              <p class="margin-bottom-0 flex-container align-middle dark-gray">
                                <span class="c-icon margin-right-1 fs-21"><i class="far fa-file-pdf"></i></span>
                                Resumen
                              </p>
                              <p class="gray-gray margin-bottom-0">
                                <span class="c-icon"><i class="far fa-download"></i></span>
                              </p>
                            </a>
                          </li>
                        {% endif %}
                        
                        {% if topic.map %}
                          <li class="c-topic__item">                            
                            <a
                              target="_blank" 
                              class="c-topic__link flex-container align-justify align-middle"
                              @click="downloadMaterial({{unity_id}}, {{topic.id}}, '{{topic.map}}', 'map')">
                              <p class="margin-bottom-0 flex-container align-middle dark-gray">
                                <span class="c-icon margin-right-1 fs-21"><i class="far fa-file-pdf"></i></span>
                                Mapa Mental
                              </p>
                              <p class="gray-gray margin-bottom-0">
                                <span class="c-icon"><i class="far fa-download"></i></span>
                              </p>
                            </a>
                          </li>                    
                        {% endif %}
  
                        {% if topic.worksheet %}                      
                          <li class="c-topic__item">
                            <a
                              target="_blank" 
                              class="c-topic__link flex-container align-justify align-middle"
                              @click="downloadMaterial({{unity_id}}, {{topic.id}}, '{{topic.worksheet}}', 'worksheet')">
                              <p class="margin-bottom-0 flex-container align-middle dark-gray">
                                <span class="c-icon margin-right-1 fs-21"><i class="far fa-file-pdf"></i></span>
                                Hoja de trabajo
                              </p>
                              <p class="gray-gray margin-bottom-0">
                                <span class="c-icon"><i class="far fa-download"></i></span>
                              </p>
                            </a>
                          </li>
                        {% endif %}
  
                        {% if topic.solutions %}
                          <li class="c-topic__item">                            
                            <a
                              target="_blank" 
                              class="c-topic__link flex-container align-justify align-middle"
                              @click="downloadMaterial({{unity_id}}, {{topic.id}}, '{{topic.solutions}}', 'solutions')">
                              <p class="margin-bottom-0 flex-container align-middle dark-gray">
                                <span class="c-icon margin-right-1 fs-21"><i class="far fa-file-pdf"></i></span>
                                Solucionario
                              </p>
                              <p class="gray-gray margin-bottom-0">
                                <span class="c-icon"><i class="far fa-download"></i></span>
                              </p>
                            </a>
                          </li>                    
                        {% endif %}                        
                      </ul>
                    {% endfor %}
                  </ul>
                </div>
              </li>
          {% endfor %}
        </ul>
      </section>      
    </div>
  </section>
{% endblock %}

{% block footer %}{% endblock %}
