<!doctype html>
<html lang="es">
  <head>
    {% include '_html-head.twig' %}

    {% block metas %}
      {% include "_html-seo.twig" %}
      
      {# content #}
    {% endblock %}
  </head>

  <body class="{% if post.post_type == 'course' or post.slug == 'carrito' or post.slug == 'compra-exitosa' %} bg-pri-alt {% endif %}">
    <main class="c-main position-relative overflow-hidden" id="app" data-site="{{site.url}}" data-theme="{{theme.link}}">
      <div class="c-page-loader width-100 height-100 position-fixed bg-white flex-container align-center-middle" :class="{ hidden : isLoadedPage }" style="z-index: 9000">
        <div class="c-loader c-loader--full active">
          <div class="container height-100 flex-container align-center-middle">
            <div class="loader">
              {% for item in [1,2,3,4,5] %}              
                <div class="loader--dot"></div>
              {% endfor %}       
            </div>
          </div>
        </div>        
      </div>

      {% block hero %}
        {# Content #}
      {% endblock %}

      <sector v-if="!logedUser || logedUser.user_rol == 'foreign'" type="public" name="publico"></sector>
      <sector v-if="!logedUser || logedUser.user_rol == 'foreign'" type="private" name="privado"></sector>

      <sector v-if="logedUser && (logedUser.user_sector == 'publico' || logedUser.user_sector == 'ongs')" type="public" name="publico"></sector>
      <sector v-else-if="logedUser && logedUser.user_sector == 'privado'" type="private" name="privado"></sector>

      {% block content %}
        {# Content #}
      {% endblock %}

      {% block footer %}
        {% include "_html-footer.twig" %}
        
        {# Content #}
      {% endblock %}      
    </main>

    <button onclick="signIn()">Google</button>

    <script src="https://apis.google.com/js/platform.js" async defer></script>

    {{ function('wp_footer') }}

    <script>
      function signIn() {
        gapi.load('auth2', function() {
          const auth2 = gapi.auth2.init({
            client_id: '999086702146-87q1a9kleriolc0ro8g7ob1qvp3k09d3.apps.googleusercontent.com',
            fetch_basic_profile: true,
            scope: 'profile',
          })

          auth2.signIn().then(user => {
            const profile = user.getBasicProfile()

            console.log('Full Name: ' + profile.getName());
            console.log('Given Name: ' + profile.getGivenName());
            console.log('Family Name: ' + profile.getFamilyName());
          }, (err) => {
            console.log(err);
          })
        })
      }
    </script>
  </body>
</html>
